<!DOCTYPE html>

<html>
<head>
	<title> Solve Sudoku </title>
	<meta name="viewport" content="width= device-width initial-scale= 1.0 ">
	<link href="https://fonts.googleapis.com/css2?family=Stick&display=swap" rel="stylesheet">
	
	<meta >
	
	<style>
		*{
			padding: 0px;
			margin: 0px;
		}
		h1 {
			font-size: 41px;
			margin-bottom: 0px;
			font-family: 'Stick', sans-sarif;
			margin-top: -3vh;
			margin-left: 29.5vw;
			margin-top: 3px;
		}
		hr {
			/*margin-top: 0px;*/
		}
		tr td {
			width: 10vw;
			height: 10vw;
			text-align: center;
			outline: none;
			border-radius: 1px;
			caret-color: #313131;
			background-color: #e8ff27;
		}
		table {
			border-radius: -0px;
			background-color: #2cccea;
			margin-top: 0px;
			margin: 5px;
		}
		
		div {
			margin: 11vw;
			margin-top: 2.5vh;
			margin-bottom: 1vh;
			background-color: #D67E01;
			height: 10vh;
			text-align: center;
			line-height: 10vh;
			border-radius: 3px;
			font-size: 5vh;
			font-weight: bold;
			
		}
		
		#clockBar {
			background-color: #303030;
			color: white;
			margin-left: -150%;
			height: 20%;
			width: 20vw;
			padding: 10px 20px 10px 20px;
			border-radius: 10px;
			font-weight: bolder;
			margin-bottom: 3px;
			display: flex;
			transition-duration: 2s;
			
		}
		td:hover {
			background: #ffff0f;
		}
		
		@media only screen and (min-width: 480px) {
			h1 {
				margin-left: 38vw;
			}
			
			table {
				margin-left: 28%;
			}
			tr td {
				width: 10vh;
				height: 10vh;
				text-align: center;
				outline: none;
				border-radius: 1px;
				background-color: #e8ff27;
			}
			div {
				margin-left: 31%;
				width: 90vh;
			}
		}
		
	</style>
</head>
<body style="background-color: lightgrey">
	
	
	<p id="demo" align="center"> <h1 onclick="showClock(0)" > <ins> sudoku </ins>
	</h1> </p>
	<p id="clockBar" > 00:00:00 </p>
	
	<table border="1">
		<tr>
			<td id="00" contenteditable style="border-radius: 10px 0 0 0">  </td>
			<td id="01" contenteditable> </td>
			<td id="02" contenteditable style="border-radius: 0 10px 0 0"> </td>
			<td id="03" contenteditable style="border-radius: 10px 0 0 0"> </td>
			<td id="04" contenteditable> </td>
			<td id="05" contenteditable style="border-radius: 0 10px 0 0"> </td>
			<td id="06" contenteditable style="border-radius: 10px 0 0 0"> </td>
			<td id="07" contenteditable> </td>
			<td id="08" contenteditable style="border-radius: 0 10px 0 0"> </td>
		</tr>
		<tr>
			<td id="10" contenteditable>  </td>
			<td id="11" contenteditable> </td>
			<td id="12" contenteditable> </td>
			<td id="13" contenteditable> </td>
			<td id="14" contenteditable> </td>
			<td id="15" contenteditable> </td>
			<td id="16" contenteditable> </td>
			<td id="17" contenteditable> </td>
			<td id="18" contenteditable> </td>
		</tr>
		<tr>
			<td id="20" contenteditable style="border-radius: 0 0 0 10px">  </td>
			<td id="21" contenteditable> </td>
			<td id="22" contenteditable style="border-radius: 0 0 10px 0"> </td>
			<td id="23" contenteditable style="border-radius: 0 0 0 10px"> </td>
			<td id="24" contenteditable> </td>
			<td id="25" contenteditable style="border-radius: 0 0 10px 0"> </td>
			<td id="26" contenteditable style="border-radius: 0 0 0 10px"> </td>
			<td id="27" contenteditable> </td>
			<td id="28" contenteditable style="border-radius: 0 0 10px 0"> </td>
		</tr>
		<tr>
			<td id="30" contenteditable style="border-radius: 10px 0 0 0">  </td>
			<td id="31" contenteditable> </td>
			<td id="32" contenteditable style="border-radius: 0 10px 0 0"> </td>
			<td id="33" contenteditable style="border-radius: 10px 0 0 0"> </td>
			<td id="34" contenteditable> </td>
			<td id="35" contenteditable style="border-radius: 0 10px 0 0"> </td>
			<td id="36" contenteditable style="border-radius: 10px 0 0 0"> </td>
			<td id="37" contenteditable> </td>
			<td id="38" contenteditable style="border-radius: 0 10px 0 0"> </td>
		</tr>
		<tr>
			<td id="40" contenteditable>  </td>
			<td id="41" contenteditable> </td>
			<td id="42" contenteditable> </td>
			<td id="43" contenteditable> </td>
			<td id="44" contenteditable> </td>
			<td id="45" contenteditable> </td>
			<td id="46" contenteditable> </td>
			<td id="47" contenteditable> </td>
			<td id="48" contenteditable> </td>
		</tr>
		<tr>
			<td id="50" contenteditable style="border-radius: 0 0 0 10px">  </td>
			<td id="51" contenteditable> </td>
			<td id="52" contenteditable style="border-radius: 0 0 10px 0"> </td>
			<td id="53" contenteditable style="border-radius: 0 0 0 10px"> </td>
			<td id="54" contenteditable> </td>
			<td id="55" contenteditable style="border-radius: 0 0 10px 0"> </td>
			<td id="56" contenteditable style="border-radius: 0 0 0 10px"> </td>
			<td id="57" contenteditable> </td>
			<td id="58" contenteditable style="border-radius: 0 0 10px 0"> </td>
		</tr>
		<tr>
			<td id="60" contenteditable style="border-radius: 10px 0 0 0">  </td>
			<td id="61" contenteditable> </td>
			<td id="62" contenteditable style="border-radius: 0 10px 0 0"> </td>
			<td id="63" contenteditable style="border-radius: 10px 0 0 0"> </td>
			<td id="64" contenteditable> </td>
			<td id="65" contenteditable style="border-radius: 0 10px 0 0"> </td>
			<td id="66" contenteditable style="border-radius: 10px 0 0 0"> </td>
			<td id="67" contenteditable> </td>
			<td id="68" contenteditable style="border-radius: 0 10px 0 0"> </td>
		</tr>
		<tr>
			<td id="70" contenteditable>  </td>
			<td id="71" contenteditable> </td>
			<td id="72" contenteditable> </td>
			<td id="73" contenteditable> </td>
			<td id="74" contenteditable> </td>
			<td id="75" contenteditable> </td>
			<td id="76" contenteditable> </td>
			<td id="77" contenteditable> </td>
			<td id="78" contenteditable> </td>
		</tr>
		<tr>
			<td id="80" contenteditable style="border-radius: 0 0 0 10px">  </td>
			<td id="81" contenteditable> </td>
			<td id="82" contenteditable style="border-radius: 0 0 10px 0"> </td>
			<td id="83" contenteditable style="border-radius: 0 0 0 10px"> </td>
			<td id="84" contenteditable> </td>
			<td id="85" contenteditable style="border-radius: 0 0 10px 0"> </td>
			<td id="86" contenteditable style="border-radius: 0 0 0 10px"> </td>
			<td id="87" contenteditable> </td>
			<td id="88" contenteditable style="border-radius: 0 0 10px 0"> </td>
			
		</tr>
		
	</table><hr >
	
	<div id="accessor" onclick="callStart()"> Play </div>
	<script>
		var grid2 = [
						[' ',' ',' ','4','5','6','7','8','9'],
						['4','5','6','7','8','9','1','2','3'],
						['7','8','9',' ',' ',' ','4','5','6'],
						['2','1','4','3','6','5','8','9','7'],
						['3','6','5','8','9','7','2','1','4'],
						['8','9','7','2','1','4','3','6','5'],
						[' ',' ',' ','6','4','2','9','7','8'],
						['6','4','2','9','7','8','5','3',' '],
						['9','7','8','5','3','1','6',' ',''],
				];
		var grid = [
						['','','','','','','','',''],
						['','','','','','','','',''],
						['','','','','','','','',''],
						['','','','','','','','',''],
						['','','','','','','','',''],
						['','','','','','','','',''],
						['','','','','','','','',''],
						['','','','','','','','',''],
						['','','','','','','','',''],
		];
				
		var indx1,indx2;
		var nums = [1,9,3,4,5,8,6,7,9];
		var aBool=1;
		var funcCall = 0;
		
		
		//timer
		var hr=0,mn=0,sc=0;
		var started=false,stopped=false;
		
		function init() {
		if (stopped) {
		started=false
		return;
		}
		started=true
		hr=hr.toString();
		mn=mn.toString();
		sc=sc.toString();
		
		
		if (hr.length<2) {
		hr = '0'+hr
		}
		if (mn.length<2) {
		mn = '0'+mn
		}
		if (sc.length<2) {
		sc = '0'+sc
		}
		
		document.getElementById('clockBar').innerHTML = hr+':'+mn+':'+sc;
		stopwatch_cal();
		}
		function stopwatch_cal() {
		hr = Number(hr);
		mn = Number(mn);
		sc = Number(sc);
		setTimeout(() => {
		if (++sc == 60) {
		mn+=1;
		sc=0;
		}
		if (mn == 60) {
		hr+=1;
		mn=0;
		}
		init();
		},1000);
		}
		function swStart() {
		stopped=false;
		if(!started) init();
		}
		function swStop() {
		stopped=true;
		}
		function swReset() {
		swStop();
		hr=0,mn=0,sc=0;
		document.getElementById('clockBar').innerHTML = '00:00:00';
		}
		
		
		
		
		
		
		
		
		
		function showClock(n) {
			var clock = document.getElementById('clockBar');
			clock.style.marginLeft = "68vw";
			setTimeout(() => {
				if (n == 0) {
					clock.style.marginLeft = "-150%";
				}
			},5000);
		}
		
		function callStart() {
			swStart();
			if (aBool) {
				start();
				aBool = 0;
				document.getElementById('accessor').innerHTML = "submit";
			}
			else {
				checkWin();
			}
		}
		function fill() {
			for (var i=0;i<9;i++) {
				for (var j=0;j<9;j++) {
					var id = String(i)+String(j);
					var num = String(document.getElementById(id).innerHTML);
					if (num == ' ' || num == '') {
						grid[i][j] = 0;
					}
					else {
						grid[i][j] = Number(num);
					}
				}
			}
		}
		
		function checkWin() {
			fill();
			for (var i=0;i<9;i++) {
				for (var j=0;j<9;j++) {
					if (grid[i][j] == 0) {
						document.getElementById('accessor').innerHTML = "Not Solved";
						setTimeout(() => {
							document.getElementById('accessor').innerHTML = "submit";
						},1729);
						return 0;
					}
					if (isSafe(grid,i,j,grid[i][j]) == 0) {
						document.getElementById('accessor').innerHTML = "Not Solved";
						setTimeout(() => {
							document.getElementById('accessor').innerHTML = "submit";
						},1729);
						
						return 2;
					}
				}
			}
			document.getElementById('accessor').innerHTML = "Solved!";
			swStop();
			showClock(1);
			return 1;
		}
		
		
		function dTransfer2() {
			for (var e=0;e<9;e++) {
				for (var f=0;f<9;f++) {
					grid2[e][f] = grid[e][f];
				}
			}
		}
		
		function dTransfer1() {
			for (var e=0;e<9;e++) {
				for (var f=0;f<9;f++) {
					grid[e][f] = grid2[e][f];
				}
			}
		}
		
		function gridI() {
			for (var g=0;g<9;g++) {
				for (var h=0;h<9;h++) {
					grid[g][h] = '';
				}
			}
		}
		
		
		function start() {
			var num,indx,indx1,indx2;
			var hard = [0,0,1,0,0,0,0,1];
			var mid = [1,0,1,0,1,0,1,0];
			var easy = [1,1,0,1,1,1,0,1];
			
			var bool = easy;
			//funcCall++;
			print(grid);
			
			for (var n=0;n<17;n++) {
				indx1 = Math.floor(Math.random()*9);
				indx2 = Math.floor(Math.random()*9);
				num = Math.floor(Math.random()*9)+1;
				
				if (isSafe(grid,indx1,indx2,num)) {
					grid[indx1][indx2] = num;
				}
				
			}
			if (solveSudoku(grid,0,0) == 1) {
				for (var k=0;k<9;k++) {
					for (var l=0;l<9;l++) {
						indx = Math.floor(Math.random()*8);
						if (bool[indx] == 0) {
							grid[k][l] = 0;
						}
					}
				}
				print(grid);
				return ;
			}
			gridI();
			start();
		}
		
		
		
		function isSafe(grid,row,col,num) {
			var p,q;
			for (var p=0;p<=8;p++) {
				if (grid[row][p] == num && p!=col) {
					return 0;
				}
			}
			
			for (var q=0;q<=8;q++) {
				if (grid[q][col] == num && q!=row) {
					return 0;
				}
			}
			
			var sRow = row-row%3;
			var sCol = col-col%3;
			
			for (var p=0;p<3;p++) {
				for (var q=0;q<3;q++) {
					if (grid[p+sRow][q+sCol] == num && (row!=p+sRow && col!=q+sCol)) {
						return 0;
					}
				}
			}
			return 1;
		}
		
		function solveSudoku(grid,row,col) {
			if (col == 9) {
				if (row == 8) {
				return 1;
				}
				row++;
				col=0;
			}
			if (grid[row][col] > 0) {
				return solveSudoku(grid,row,col+1);
			}
			for (var num = 1;num<10;num++) {
				if (isSafe(grid,row,col,num) == 1) {
					grid[row][col] = num;
					if (solveSudoku(grid,row,col+1) == 1) {
						return 1;
					}
				}
				grid[row][col] = 0;
			}
			return 0;
		}
		
		
		function print(grid) {
			for (var i=0;i<9;i++) {
				for (var j=0;j<9;j++) {
					id = String(i)+String(j);
					if (grid[i][j] != 0){
						document.getElementById(id).innerHTML= grid[i][j];
						document.getElementById(id).style.backgroundColor = '#c2d1d8';
						document.getElementById(id).contentEditable = false;
					}
				}
			}
		}
		
		function clearSudoku() {
			for (var i=0;i<9;i++) {
				for (var j=0;j<9;j++) {
					grid[i][j] = '';
				}
			}
		}
	</script>
</body>
</html>
